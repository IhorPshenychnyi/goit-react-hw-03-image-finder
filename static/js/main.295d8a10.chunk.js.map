{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/ImageGallery/ImageGallery.module.css","components/Searchbar/Searchbar.js","services/apiService.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleSearchChange","evt","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","className","s","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","api","fetchGallery","name","page","url","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","webformatURL","largeImageURL","alt","onOpenModal","onClick","src","ImageGalleryItemImage","Button","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleOverlayClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","ImageGallery","pictures","error","status","imageURL","onCloseModal","prevProps","prevState","prevQuery","nextQuery","prevPage","currentPage","imageAPI","images","total","hits","catch","scrollTo","top","documentElement","scrollHeight","behavior","clickButton","color","height","width","timeout","map","picture","tags","id","App","handleFormSubmit","resetPage","nextPage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.295d8a10.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1vd0K\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3P9hh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2rIjX\",\"Modal\":\"Modal_Modal__GYFkO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__MtGkg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__Q9gWu\"};","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  state = {\r\n    searchQuery: '',\r\n  };\r\n\r\n  handleSearchChange = evt => {\r\n    this.setState({ searchQuery: evt.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = evt => {\r\n    evt.preventDefault();\r\n\r\n    if (this.state.searchQuery.trim() === '') {\r\n      return;\r\n    }\r\n\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    this.setState({ searchQuery: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.searchQuery}\r\n            onChange={this.handleSearchChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { Searchbar };\r\n","const API_KEY = '22580810-f54a4b0451f19078aae6377b4';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nfunction fetchGallery(name, page) {\r\n  const url = `${BASE_URL}?q=${name}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\r\n\r\n  return fetch(url).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n\r\n    return Promise.reject(new Error(`Not found ${name}`));\r\n  });\r\n}\r\n\r\nconst api = { fetchGallery };\r\n\r\nexport default api;\r\n","import PropTypes from 'prop-types';\r\n\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({\r\n  webformatURL,\r\n  largeImageURL,\r\n  alt,\r\n  onOpenModal,\r\n}) => {\r\n  return (\r\n    <li\r\n      className={s.ImageGalleryItem}\r\n      onClick={() => onOpenModal(largeImageURL, alt)}\r\n    >\r\n      <img src={webformatURL} alt={alt} className={s.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired,\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  onOpenModal: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { ImageGalleryItem };\r\n","import PropTypes from 'prop-types';\r\n\r\nimport s from './Button.module.css';\r\n\r\nconst Button = ({ onClick }) => {\r\n  return (\r\n    <button type=\"button\" onClick={onClick} className={s.Button}>\r\n      Load more\r\n    </button>\r\n  );\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { Button };\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  handleOverlayClick = evt => {\r\n    if (evt.currentTarget === evt.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { largeImageURL, alt } = this.props;\r\n\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.handleOverlayClick}>\r\n        <div className={s.Modal}>\r\n          <img src={largeImageURL} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  largeImageURL: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { Modal };\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport imageAPI from '../../services/apiService';\r\nimport { ImageGalleryItem } from '../ImageGalleryItem/ImageGalleryItem';\r\nimport { Button } from '../Button/Button';\r\nimport { Modal } from '../Modal/Modal';\r\n\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport s from './ImageGallery.module.css';\r\n\r\nclass ImageGallery extends Component {\r\n  state = {\r\n    pictures: [],\r\n    error: null,\r\n    status: 'idle',\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevQuery = prevProps.searchQuery;\r\n    const nextQuery = this.props.searchQuery;\r\n    const prevPage = prevProps.page;\r\n    const currentPage = this.props.page;\r\n\r\n    if (prevQuery !== nextQuery) {\r\n      this.setState({ status: 'pending' });\r\n\r\n      imageAPI\r\n        .fetchGallery(nextQuery, currentPage)\r\n        .then(images => {\r\n          if (images.total > 0) {\r\n            this.setState({\r\n              pictures: images.hits,\r\n              status: 'resolved',\r\n            });\r\n          } else {\r\n            this.setState({\r\n              error: `Not found ${nextQuery}`,\r\n              status: 'rejected',\r\n            });\r\n          }\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }));\r\n    }\r\n\r\n    if (prevPage !== currentPage && currentPage > 1) {\r\n      imageAPI\r\n        .fetchGallery(nextQuery, currentPage)\r\n        .then(images => {\r\n          this.setState(prevState => ({\r\n            pictures: [...prevState.pictures, ...images.hits],\r\n            status: 'resolved',\r\n          }));\r\n        })\r\n        .then(() => {\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: 'smooth',\r\n          });\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }));\r\n    }\r\n  }\r\n\r\n  onOpenModal = (imageURL, alt) => {\r\n    this.setState({\r\n      largeImageURL: imageURL,\r\n      alt: alt,\r\n    });\r\n  };\r\n\r\n  onCloseModal = () => {\r\n    this.setState({\r\n      largeImageURL: '',\r\n      alt: '',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { pictures, error, status, largeImageURL, alt } = this.state;\r\n    const { clickButton } = this.props;\r\n\r\n    if (status === 'idle') {\r\n      return <p>Enter something</p>;\r\n    }\r\n\r\n    if (status === 'pending') {\r\n      return (\r\n        <Loader\r\n          type=\"ThreeDots\"\r\n          color=\"#00BFFF\"\r\n          height={80}\r\n          width={80}\r\n          timeout={3000}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (status === 'rejected') {\r\n      return <p>{error}</p>;\r\n    }\r\n\r\n    if (status === 'resolved') {\r\n      return (\r\n        <div>\r\n          <ul className={s.ImageGallery}>\r\n            {pictures.map(picture => (\r\n              <ImageGalleryItem\r\n                key={picture.id}\r\n                webformatURL={picture.webformatURL}\r\n                largeImageURL={picture.largeImageURL}\r\n                alt={picture.tags}\r\n                onOpenModal={this.onOpenModal}\r\n              />\r\n            ))}\r\n          </ul>\r\n          <Button onClick={clickButton} />\r\n          {largeImageURL && (\r\n            <Modal\r\n              largeImageURL={largeImageURL}\r\n              alt={alt}\r\n              onClose={this.onCloseModal}\r\n            />\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  searchQuery: PropTypes.string.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n  clickButton: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { ImageGallery };\r\n","import React, { Component } from 'react';\n\nimport { Searchbar } from './components/Searchbar/Searchbar';\nimport { ImageGallery } from './components/ImageGallery/ImageGallery';\n\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n  };\n\n  handleFormSubmit = searchQuery => {\n    this.setState({ searchQuery });\n    this.resetPage();\n  };\n\n  nextPage = () => {\n    return this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  resetPage = () => {\n    return this.setState({ page: 1 });\n  };\n\n  render() {\n    const { searchQuery, page } = this.state;\n    return (\n      <div>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery\n          searchQuery={searchQuery}\n          page={page}\n          clickButton={this.nextPage}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'modern-normalize/modern-normalize.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1lYBI\",\"SearchForm\":\"Searchbar_SearchForm__1DrD6\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1v_NE\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__aYA3Q\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2aXjk\"};"],"sourceRoot":""}